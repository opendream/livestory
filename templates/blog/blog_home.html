{% extends 'base_single.html' %}

{% load common_tags %}

{% block head_title %}Welcome{% endblock %}

{% block html_head %}
{% endblock %}

{% block content %}
<div class="scour blog-list" style="width:{{ scour_width }}px; height:{{ scour_height }}px">
  {% for rect in rects %}
  <div class="rect {{ rect.placement }}{% if rect.blog %} has_blog{% endif %}" style="
    left:{{ rect.rect.left }}px;
    top:{{ rect.rect.top }}px;
    width: {{ rect.rect.width }}px;
    height: {{ rect.rect.height }}px;
    padding: 5px;
  " 
  {% if rect.blog %}
  data-original-title="{{ rect.blog.title }}" 
  data-content="<span class='emoticon-icon emo_{{ rect.blog.get_mood_text|lower }}'>Mood: {{ rect.blog.get_mood_text }}</span><span class='location'>{{ rect.blog.location.city }}, {{ rect.blog.location.country }}</span>" 
  {% endif %}
  >
    {% if rect.blog %}
    <a href="{% url blog_view rect.blog.id %}">
      <img 
        width="{{ rect.rect.width }}" 
        height="{{ rect.rect.height }}" 
        alt="{{ rect.blog.title }}" 
        src="{{ rect.blog.image|crop:rect.widthxheight }}" 
      />
      <div class="black-layer"></div>
    </a>
    {% endif %}
  </div>
  {% endfor %}
  <script type="text/javascript">
    $('.scour .has_blog.right').popover({'placement': 'right'});
    $('.scour .has_blog.left').popover({'placement': 'left'});
    
    $('.black-layer').css('opacity', 0);
    
    
    $('.rect').mouseenter(function () {
      $(this).css('opacity', 1);
      $('.black-layer').show().stop().animate({opacity: 0.3}, {queue: false, duration: 200});
      $('.black-layer', $(this)).hide()
    }).mouseleave(function () {
      $('.black-layer').stop().animate({opacity: 0}, {queue: false, duration: 200});
    })
    
    $('.popover').live('mouseenter', function (e) {
      //console.log(e)
    });
    
  </script>
</div>
{% endblock %}