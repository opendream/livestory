{% extends 'base_backend.html' %}

{% block head_title %}Create Your Blog{% endblock %}

{% block html_head %}
<script src="{{STATIC_URL}}libs/bootstrap/js/bootstrap-transition.js" type="text/javascript"></script>
<script src="{{STATIC_URL}}libs/bootstrap/js/bootstrap-dropdown.js" type="text/javascript"></script>
{% endblock %}

{% block html_foot %}
<script src="{{STATIC_URL}}libs/jquery.fileupload/js/vendor/jquery.ui.widget.js" type="text/javascript"></script>
<script src="{{STATIC_URL}}libs/jquery.fileupload/js/jquery.iframe-transport.js" type="text/javascript"></script>
<script src="{{STATIC_URL}}libs/jquery.fileupload/js/jquery.fileupload.js" type="text/javascript"></script>
{% endblock %}

{% block nav %}
{% endblock %}

{% block content %}
<form class="form-horizontal" method="post" action="{{ action }}" enctype="multipart/form-data">
	{% csrf_token %}
	<fieldset>
		<legend>Create Your Blog</legend>
		
		<div class="control-group{% if form.title.errors %} error{% endif %}">
			<label class="control-label" for="id_title">Title</label>
			<div class="controls">
				{{ form.title }}
				{{ form.title.errors }}
			</div>
		</div>
		
		<div class="control-group{% if form.image.errors %} error{% endif %}">
			<label class="control-label" for="id_image">Image</label>
			<div class="controls">
				<img src="{{ image_path }}" />
				{{ form.image }}
				{{ form.image.errors }}
			</div>
		</div>
		
		<div class="control-group{% if form.description.errors %} error{% endif %}">
			<label class="control-label" for="id_description">Description</label>
			<div class="controls">
				{{ form.description }}
				{{ form.description.errors }}
				<p class="help-block">Limit <span id="text-counting">300</span> characters.</p>
			</div>
		</div>
		
		<div class="control-group">
			<label class="control-label" for="id_country">Location</label>
			<div class="controls">
				{{ form.country }}
				{{ form.city }}
				{{ form.country.errors }}
				<p class="help-block">Ex. Japan, Brazil, Liverpool, Bangkok</p>
			</div>
		</div>
		
		<div class="control-group{% if form.mood.errors %} error{% endif %}">
			<label class="control-label" for="mood_1">Mood</label>
			<div class="controls"> 
				{% for value, text in moods %}
				<label class="radio inline">
					<input type="radio" id="mood_{{ value }}" value="{{ value }}" name="mood"{% ifequal form.mood.data value|lower %} checked="checked"{% endifequal %}> {{ text }}
				</label>
				{% endfor %}
			</div>
		</div>
		
		<div class="control-group">
			<label class="control-label" for="id_category">Category</label>
			<div class="controls">
				{{ form.category }}
			</div>
		</div>
		
		<div class="control-group{% if form.private.errors %} error{% endif %}">
			<label class="control-label" for="visibility_0">Visibility</label>
			<div class="controls">
				{% for value, text in visibilities %}
				<label class="radio">
					<input type="radio" id="visibility_{{ value|yesno:"1,0"}}" name="private" value="{{ value|yesno:"1,0"}}"{% ifequal value|yesno:"1,0" form.private.data %} checked="checked"{% endifequal %}>
					{{ text }}
				</label>
				{% endfor %}
				{{ form.private.errors }}
			</div>
		</div>
		
		<div class="form-backend">
			{% if is_draft %}
			<button type="submit" class="btn-grey" name="draft" value="1">Save Draft</button>
			{% endif %}
			{% if is_draft %}
			<button type="submit" class="btn-green" name="draft" value="0">Publish</button>
			{% else %}
			<button type="submit" class="btn-green" name="draft" value="0">Save changes</button>
			{% endif %}
			<button type="reset" class="btn">Cancel</button>
		</div>
	</fieldset>
</form>
{% endblock %}